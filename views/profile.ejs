<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">

    <title>Poliexplorere</title>
    <link rel="stylesheet" href="/assets/css/profileform.css">
    <!-- Scripts core CSS -->
    <%- include('partials/css1') %>
        <!-- Scripts core CSS -->


</head>

<body>

    <!-- ***** Preloader Start ***** -->
    <div id="js-preloader" class="js-preloader">
        <div class="preloader-inner">
            <span class="dot"></span>
            <div class="dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </div>
    <!-- ***** Preloader End ***** -->

    <!-- ***** Header Area Start ***** -->
    <%- include('partials/header') %>
        <!-- ***** Header Area End ***** -->

        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="main-info header-text">
                        <div class="page-content">

                            <div class="profile-actions">
                            <button class="edit-profile-btn" onclick="window.location.href='/edituser'">Editar
                                Perfil</button>
                            <button class="edit-profile-btn" onclick="window.location.href='/logout'">Cerrar
                                sesi칩n</button>
                        </div>
                            <!-- ***** Panel de Control Start ***** -->
                            <div class="row justify-content-center"
                                style="background-color: #dee6e1; padding: 60px 20px; border-radius: 15px; margin-bottom: 40px;">

                                <div class="col-lg-12 text-center mb-5">

                                    <h2 style="font-weight: bold; color: black;">Descripci칩n general del panel de
                                        control
                                    </h2>
                                    <p style="max-width: 600px; margin: 0 auto;">
                                        춰Bienvenido a tu panel personal! Aqu칤 puedes acceder f치cilmente a los materiales
                                        que
                                        has guardado y a los recursos que has visitado recientemente.
                                    </p>
                                </div>

                                <div class="col-lg-3 col-md-4 col-sm-6 mb-3">
                                    <a href="#materiales" class="panel-card">
                                        <i class="fas fa-folder"></i>
                                        <p>Mis Materiales</p>
                                    </a>
                                </div>
                                <div class="col-lg-3 col-md-4 col-sm-6 mb-3">
                                    <a href="#subida" class="panel-card">
                                        <i class="fas fa-upload"></i>
                                        <p>Subir materiales</p>
                                    </a>
                                </div>
                            </div>
                            <!-- ***** Panel de Control End ***** -->

                            <!-- ***** Materiales Guardados Start ***** -->
                            <div id="materiales" class="container py-5">
                                <h2 class="text-center mb-2" style="color: black;">Mis Materiales</h2>

                                <% if (hayMateriales) { %>
                                    <div class="row g-4">
                                        <div class="other-games">
                                            <div class="row">
                                                <div class="col-lg-12 mb-4">
                                                    <div class="row">
                                                        <!-- VIDEOS -->
                                                        <div class="col-lg-6">
                                                          <li><strong>Videos:</strong></li>
                                                          <% materiales.filter(m => m.tipo === 'Video (URL)').forEach(video => { %>
                                                            <div class="material-item">
                                                              <p><%= video.nombre %> - <a href="<%= video.contenido %>" target="_blank">Ver video</a></p>
                                                            </div>
                                                          <% }) %>
                                                        </div>
                                                    
                                                      <!-- DOCUMENTOS -->
                                                        <div class="col-lg-6">
                                                          <li><strong>Art칤culos:</strong></li>
                                                          <% materiales.filter(m => m.tipo === 'Documento').forEach(doc => { %>
                                                            <div class="material-item">
                                                              <p><%= doc.nombre %> - 
                                                                <a href="/<%= doc.contenido %>" target="_blank">Ver PDF</a>
                                                              </p>
                                                            </div>
                                                          <% }) %>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                <% } else { %>
                                  <div class="text-center mt-4">
                                    <p style="color: gray;">No tienes materiales disponibles a칰n.</p>
                                  </div>
                                <% } %>
                            </div>


                            <!-- ***** Materiales Guardados End ***** -->

                            <!-- ***** Subir Materiales Start ***** -->
                            <div id="subida" class="upload-section">
                                <h2 class="section-title" style="color: black;">Subir materiales</h2>

                                <div class="upload-card">
                                    

                                    <form action="/subir-material" method="POST" enctype="multipart/form-data" id="form1">
                                        <!-- ID de usuario oculto -->
                                        <input type="hidden" name="id_usuario" value="<%= usuario.id %>" /> 
                                        <!-- Nombre del contenido -->
                                        <label for="nombre">T칤tulo:</label>
                                        <input type="text" name="nombre" required />    
                                        <!-- Selecci칩n de semestre -->
                                        <label for="semestre">Semestre:</label>
                                        <select id="semestre" name="semestre" required>
                                          <option value="">Seleccione un semestre</option>
                                          <% for (let i = 1; i <= 10; i++) { %>
                                            <option value="<%= i %>">Semestre <%= i %></option>
                                          <% } %>
                                        </select>
                                    
                                        <!-- Selecci칩n de materia -->
                                        <label for="id_materia">Materia:</label>
                                        <select id="id_materia" name="id_materia" required>
                                          <option value="">Seleccione una materia</option>
                                        </select>
                                    
                                        <!-- Tipo de contenido -->
                                        <label for="tipo">Tipo:</label>
                                        <select name="tipo" id="tipo" required onchange="mostrarCampoContenido(this.value)">
                                          <option value="">Seleccione un tipo</option>
                                          <option value="Video (URL)">Video (URL)</option>
                                          <option value="Documento">Documento</option>
                                        </select>
                                    
                                        <!-- Contenido: archivo o URL -->
                                        <div id="campoURL" style="display: none;">
                                          <label for="contenido_url">URL del video:</label>
                                          <input type="url" name="contenido_url" />
                                        </div>

                                        <div id="campoArchivo" style="display: none;" class="upload-area">
                                            <div class="upload-icon">游닋</div>
                                            <p class="upload-instruction">Arrastre y suelte sus archivos aqu칤</p>
                                            <input type="file" class="upload-link" name="contenido_archivo">
                                        </div>                                    
                                        <button type="submit">Subir material</button>
                                    </form>

                                </div>
                            </div>
                            <!-- ***** Subir Materiales End ***** -->

                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <!-- ***** Traer materias ***** -->
        <script src="/assets/js/profileform.js"></script>
        <!-- ***** Footer Area Start ***** -->
        <%- include('partials/footer') %>
        <!-- ***** Footer Area end ***** -->
        <!-- ***** Scripts Area js ***** -->
        <%- include('partials/scripts1') %>
        <!-- ***** Scripts Area js ***** -->
         <% if (aletrespt) { %>
            <script>
              Swal.fire({
                icon: '<%= aletrespt.icon %>',
                title: '<%= aletrespt.title %>',
                text: '<%= aletrespt.text %>',
                confirmButtonColor: '#186843',
                confirmButtonText: 'Aceptar'
              });
            </script>
        <% } %>


</body>

</html>